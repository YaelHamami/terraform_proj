{
  "network_rule_collections": [
    {
      "name"    : "allowTcp",
      "priority": 300,
      "action"  : "Allow",
      "rules"   : [
        {
          "name"                 : "allowTcpHubToSpoke",
          "source_addresses"     : ["${hub_subnet_mask}"],
          "destination_ports"    : ["22"],
          "destination_addresses": ["${spoke_subnet_mask}"],
          "protocols"            : ["TCP"]
        },
        {
          "name"                 : "allowTcpSpokeToHub",
          "source_addresses"     : ["${spoke_subnet_mask}"],
          "destination_ports"    : ["22"],
          "destination_addresses": ["${hub_subnet_mask}"],
          "protocols"            : ["TCP"]
        },
        {
          "name"                 : "allowTcpGatewayToSpoke",
          "source_addresses"     : ["${gateway_subnet_mask}"],
          "destination_ports"    : ["22"],
          "destination_addresses": ["${spoke_subnet_mask}"],
          "protocols"            : ["TCP"]
        }
      ]
    }
  ]
}